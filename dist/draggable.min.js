!function(a,b){"object"==typeof exports?module.exports=b():"function"==typeof define&&define.amd?define([],b):a.jQuery=b()}(this,function(){"use strict";function a(a){this.element=a}function b(){var a=arguments[0],b=arguments.length;if(!a)throw new TypeError("$.extend expects argument 0 to be an Object");if(b>1)for(var c=1;b>c;c++){var d=arguments[c];for(var e in d)a[e]=d[e]}return a}var c="Microsoft Internet Explorer"===navigator.appName,d=function(b){return b instanceof a?b:new a(b)};return b(d,{extend:b}),b(a.prototype,{on:function(a,b){if(a&&b)this.addEvent(a,b);else if(a)for(var c in a)this.addEvent(c,a[c])},off:function(a,b){if(a&&b)this.removeEvent(a,b);else if(a)for(var c in a)this.removeEvent(c,a[c])},addEvent:c?function(a,b){this.element.attachEvent("on"+a,b)}:function(a,b){this.element.addEventListener(a,b,!1)},removeEvent:c?function(a,b){this.element.detachEvent("on"+a,b)}:function(a,b){this.element.removeEventListener(a,b)}}),d}),function(a,b){"object"==typeof exports?module.exports=b(require("jQuery")):"function"==typeof define&&define.amd?define(["jQuery"],b):a.Draggable=b(a.jQuery)}(this,function(a){"use strict";function b(b,d){var e=this,f=c(e.start,e),g=c(e.drag,e),i=c(e.stop,e);if(!h(b))throw new TypeError("Draggable expects argument 0 to be an Element");a.extend(e,{element:b,$element:a(b),handlers:{start:l?{touchstart:f}:{mousedown:f},move:l?{touchmove:g,touchend:i}:{mousemove:g,mouseup:i}},options:a.extend({},k,d)}),e.initialize()}function c(a,b){return function(){a.apply(b,arguments)}}function d(a){return parseInt(a,10)}function e(a){return m?a.currentStyle:getComputedStyle(a)}function f(a){return a instanceof Array}function g(a){return void 0!==a&&null!==a}function h(a){return a instanceof Element||a instanceof HTMLDocument}function i(a){return a instanceof Function}function j(){}var k={grid:0,filterTarget:null,limit:{x:null,y:null},threshold:0,setCursor:!1,setPosition:!0,smoothDrag:!0,onDrag:j,onDragStart:j,onDragEnd:j},l="ontouchstart"in window||"DocumentTouch"in window&&document instanceof DocumentTouch,m="Microsoft Internet Explorer"===navigator.appName,n=a(document),o=function(){for(var a=" -o- -ms- -moz- -webkit-".split(" "),b=document.body.style,c=a.length;c--;){var d=a[c]+"transform";if(d in b)return d}}();return a.extend(b.prototype,{setOption:function(a,b){var c=this;return c.options[a]=b,c.initialize(),c},get:function(){var a=this.dragEvent;return{x:a.x,y:a.y}},set:function(a,b){var c=this,d=c.dragEvent;return d.original={x:d.x,y:d.y},c.move(a,b),c},dragEvent:{started:!1,x:0,y:0},initialize:function(){var b,c=this,d=c.element,f=d.style,g=e(d),h=c.options,i=c._dimensions={height:d.offsetHeight,left:d.offsetLeft,top:d.offsetTop,width:d.offsetWidth};o&&(b=g[o],"none"===b&&(b=""),f[o]=b+" translate3d(0,0,0)"),h.setPosition&&(f.display="block",f.left=i.left+"px",f.top=i.top+"px",f.bottom=f.right="auto",f.margin=0,f.position="absolute"),h.setCursor&&(f.cursor="move"),c.setLimit(h.limit),a.extend(c.dragEvent,{x:i.left,y:i.top}),c.$element.on(c.handlers.start)},start:function(a){var b=this,c=b.getCursor(a),d=b.element;b.useTarget(a.target)&&(a.preventDefault?a.preventDefault():a.returnValue=!1,b.dragEvent.oldZindex=d.style.zIndex,d.style.zIndex=1e4,b.setCursor(c),b.setPosition(),b.setZoom(),n.on(b.handlers.move))},drag:function(b){var c=this,d=c.dragEvent,e=c.element,f=c._cursor,g=c._dimensions,h=c.options,i=g.zoom,j=c.getCursor(b),k=h.threshold,l=(j.x-f.x)/i+g.left,m=(j.y-f.y)/i+g.top;!d.started&&k&&Math.abs(f.x-j.x)<k&&Math.abs(f.y-j.y)<k||(d.started||(h.onDragStart(e,l,m,b),a.extend(d,{original:{x:l,y:m},started:!0})),c.move(l,m)&&h.onDrag(e,d.x,d.y,b))},move:function(a,b){var c=this,d=c.dragEvent,e=c.options,f=e.grid,g=c.element.style,h=c.limit(a,b,d.original.x,d.original.y);return console.log("smooth: ",e.smoothDrag,", grid: ",f),!e.smoothDrag&&f&&(h=c.round(h,f)),h.x!==d.x||h.y!==d.y?(d.x=h.x,d.y=h.y,g.left=h.x+"px",g.top=h.y+"px",!0):!1},stop:function(b){var c,d=this,e=d.dragEvent,f=d.element,g=d.options,h=g.grid;n.off(d.handlers.move),f.style.zIndex=e.oldZindex,g.smoothDrag&&h&&(c=d.round({x:e.x,y:e.y},h),d.move(c.x,c.y),a.extend(d.dragEvent,c)),d.dragEvent.started&&g.onDragEnd(f,e.x,e.y,b),d.reset()},reset:function(){var a=this,b=a.dragEvent;b={started:!1}},round:function(a){var b=this.options.grid;return{x:b*Math.round(a.x/b),y:b*Math.round(a.y/b)}},getCursor:function(a){return{x:(l?a.targetTouches[0]:a).clientX,y:(l?a.targetTouches[0]:a).clientY}},setCursor:function(a){this._cursor=a},setLimit:function(a){var b=this,c=function(a,b){return{x:a,y:b}};if(i(a))b.limit=a;else if(h(a)){var d=b._dimensions,e=a.scrollHeight-d.height,j=a.scrollWidth-d.width;b.limit=function(a,b){return 0>a?a=0:a>j&&(a=j),0>b?b=0:b>e&&(b=e),{x:a,y:b}}}else if(a){var k,l,m={x:g(a.x),y:g(a.y)};m.x||m.y?m.x&&!m.y?f(a.x)?(k=[+a.x[0],+a.x[1]],b.limit=function(a,b){return a<k[0]?a=k[0]:a>k[1]&&(a=k[1]),{x:a,y:b}}):(k=+a.x,b.limit=function(a,b){return{x:k,y:b}}):!m.x&&m.y?f(a.y)?(l=[+a.y[0],+a.y[1]],b.limit=function(a,b){return b<l[0]?b=l[0]:b>l[1]&&(b=l[1]),{x:a,y:b}}):(l=+a.y,b.limit=function(a){return{x:a,y:l}}):f(a.x)&&f(a.y)?(k=[+a.x[0],+a.x[1]],l=[+a.y[0],+a.y[1]],b.limit=function(a,b){return a<k[0]?a=k[0]:a>k[1]&&(a=k[1]),b<l[0]?b=l[0]:b>l[1]&&(b=l[1]),{x:a,y:b}}):f(a.x)?(k=[+a.x[0],+a.x[1]],l=+a.y,b.limit=function(a){return a<k[0]?a=k[0]:a>k[1]&&(a=k[1]),{x:a,y:l}}):f(a.y)?(k=+a.x,l=[+a.y[0],+a.y[1]],b.limit=function(a,b){return b<l[0]?b=l[0]:b>l[1]&&(b=l[1]),{x:k,y:b}}):(k=+a.x,l=+a.y,b.limit=function(){return{x:k,y:l}}):b.limit=c}else b.limit=c},setPosition:function(){var b=this,c=b.element,e=c.style;a.extend(b._dimensions,{left:d(e.left)||c.offsetLeft,top:d(e.top)||c.offsetTop})},setZoom:function(){for(var a=this,b=a.element,c=1;b=b.offsetParent;){var d=e(b).zoom;if(d&&"normal"!==d){c=d;break}}a._dimensions.zoom=c},useTarget:function(a){var b=this.options.filterTarget;return b instanceof Function?b(a):!0}}),b});